(this["webpackJsonppathephone-web"]=this["webpackJsonppathephone-web"]||[]).push([[0],{101:function(e,t,r){e.exports={Spinner:"Spinner_Spinner__1Ixeu",rotate:"Spinner_rotate__2rLdB"}},102:function(e,t,r){e.exports={LoadMoreButton:"LoadMoreButton_LoadMoreButton__3lXrb"}},103:function(e,t,r){e.exports={RoundButton__Button:"RoundButton_RoundButton__Button__1bepb"}},104:function(e,t,r){e.exports={ThemeProvider__Wrapper:"ThemeProvider_ThemeProvider__Wrapper__2aOTm"}},106:function(e,t,r){e.exports=r(203)},107:function(e,t,r){},14:function(e,t,r){e.exports={SearchAlbumsPage__Wrapper:"SearchAlbumsPage_SearchAlbumsPage__Wrapper__2JlHn",SearchAlbumsPage__Wrapper_loading:"SearchAlbumsPage_SearchAlbumsPage__Wrapper_loading__uMidr",SearchAlbumsPage__Wrapper_fallback:"SearchAlbumsPage_SearchAlbumsPage__Wrapper_fallback__3Kuyo",SearchAlbumsPage__Wrapper_hasResults:"SearchAlbumsPage_SearchAlbumsPage__Wrapper_hasResults__1mnOH",SearchAlbumsPage__Wrapper_hasNewResults:"SearchAlbumsPage_SearchAlbumsPage__Wrapper_hasNewResults__1DuRU",SearchAlbumsPage__Body:"SearchAlbumsPage_SearchAlbumsPage__Body__2qKu3",SearchAlbumsPage__Loader:"SearchAlbumsPage_SearchAlbumsPage__Loader__2uh6T",SearchAlbumsPage__Hero:"SearchAlbumsPage_SearchAlbumsPage__Hero__PjGBh",SearchAlbumsPage__Title:"SearchAlbumsPage_SearchAlbumsPage__Title__kE6fn",SearchAlbumsPage__SubTitle:"SearchAlbumsPage_SearchAlbumsPage__SubTitle__bHVL2",SearchAlbumsPage__Button:"SearchAlbumsPage_SearchAlbumsPage__Button__1qs0Q"}},152:function(e,t){},154:function(e,t){},17:function(e,t,r){e.exports={AlbumEditor__Wrapper:"AlbumEditor_AlbumEditor__Wrapper__mAm6n",AlbumEditor__Footer:"AlbumEditor_AlbumEditor__Footer__ZcBn8",AlbumEditor__FieldsetTitle:"AlbumEditor_AlbumEditor__FieldsetTitle__SECkl",AlbumEditor__FieldsetBody_padding:"AlbumEditor_AlbumEditor__FieldsetBody_padding__2QZy-",AlbumEditor__Fieldset:"AlbumEditor_AlbumEditor__Fieldset__V103W",AlbumEditor__Button:"AlbumEditor_AlbumEditor__Button__3koDq",AlbumEditor__Button_primary:"AlbumEditor_AlbumEditor__Button_primary__12z23",AlbumEditor__Button_secondary:"AlbumEditor_AlbumEditor__Button_secondary__3dm5e"}},203:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"startApp",(function(){return s})),r.d(n,"getLatestAlbums",(function(){return P})),r.d(n,"submitAlbum",(function(){return I})),r.d(n,"getPlaylistTracksByAlbumId",(function(){return R})),r.d(n,"getAlbumFormDataFromFiles",(function(){return q})),r.d(n,"getTrackFormDataFromFile",(function(){return J})),r.d(n,"getTrackFormDataFromFiles",(function(){return X})),r.d(n,"getIntl",(function(){return te})),r.d(n,"getAlbumsByQuery",(function(){return re}));r(107);var a=r(0),l=r.n(a),o=r(96),c=r.n(o),u=r(58),i=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=function(){return i(400)},_=r(3),m=r.n(_),f=r(13),d=r(4),p=r(21);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b=[],v=function(e){b.push(e)},A=function(e){var t=b.find((function(t){return t.id===e}));if(!t)throw new Error("Unable to find album.");return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{tracklist:Object(d.a)(t.tracklist)})},y=function(e,t){return b.slice(e,t)},O=function(){return b.length-1},g=function(e){return b.filter((function(t){return t.title.includes(e)}))},h=function(e){var t=e.title,r=e.coverSrc,n=e.tracklist,a=e.id,l=n.reduce((function(e,t){var r=t.artists.filter((function(t){return!e.includes(t)}));return[].concat(Object(d.a)(e),Object(d.a)(r))}),[]);return{id:a,title:t,artistName:l.length>1?"Various artists":l[0],coverSrc:r,saved:!0}},P=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,n,a,l,o,c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(400);case 2:return r=t.startPage,n=t.pagesCount,o=y(a=20*(r-1),l=a+20*(void 0===n?1:n)).map(h),c=O(),u=l>=c,e.abrupt("return",{items:o,lastPageFlag:u});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},S=function(e){var t=e.title,r=e.artists,n=e.audio;return{title:t,artists:r.filter((function(e){return!!e.name})).map((function(e){return e.name})),audioSrc:URL.createObjectURL(n)}},C=function(e){var t=e.title,r=e.cover,n=e.tracklist;if(null===r)throw new Error("Cover is required");return{id:T(),title:t,coverSrc:URL.createObjectURL(r),tracklist:n.map(S)}},I=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(400);case 2:v(C(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=e.title,r=e.artists,n=e.audioSrc;return{id:T(),title:t,artistName:r.join(", "),audioSrc:n}},R=function(){var e=Object(f.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(400);case 2:return r=A(t),e.abrupt("return",r.tracklist.map(L));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=r(40),N=r(42),w=r(28),j=r(41),D=r(52),B=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).message="Strict hook error.",r}return Object(j.a)(t,e),t}(Object(D.a)(TypeError)),x=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).message="Unreachable error.",r}return Object(j.a)(t,e),t}(Object(D.a)(TypeError)),F=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).message="Router params error.",r}return Object(j.a)(t,e),t}(Object(D.a)(TypeError)),M=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).message="No audio files selected.",r}return Object(j.a)(t,e),t}(Object(D.a)(Error)),U=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).message="Unexpected error.",r}return Object(j.a)(t,e),t}(Object(D.a)(Error)),W=r(66),V=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return W.parseBlob(e)})));case 2:return r=e.sent,n=r.map((function(e){return e.common.album})),a=r.map((function(e,r){var n=e.common,a=[];return n.artists&&(a=n.artists.map((function(e){return{name:e,id:T()}}))),{id:T(),title:n.title||"",artists:a,audio:t[r]}})),e.abrupt("return",{title:n.find((function(e){return!!e}))||"",tracklist:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=r(77),H=r.n(G),Y=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){var n=t.slice(0,H.a.minimumBytes),a=new FileReader;a.onloadend=function(){a.result instanceof ArrayBuffer?e(a.result):r(new U)},a.onerror=function(){return r(new U)},a.readAsArrayBuffer(n)}));case 2:return r=e.sent,n=H()(new Uint8Array(r)),e.abrupt("return",{fileType:n,file:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return e.filter((function(e){var t=e.fileType,r=e.file;return t?t.mime.startsWith("audio/"):r.type.startsWith("audio/")}))},K=function(e){return e.filter((function(e){var t=e.fileType,r=e.file;return t?t.mime.startsWith("image/"):r.type.startsWith("image/")}))},Z=/(front|cover)/g,q=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,n,a,l,o,c,u,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(Y));case 2:if(r=e.sent,n=z(r),a=K(r),!(n.length>0)){e.next=15;break}return e.next=8,V(n.map((function(e){return e.file})));case 8:return l=e.sent,o=l.tracklist,c=l.title,u=a.find((function(e){return Z.test(e.file.name)})),i=a[0]?a[0].file:null,s=u?u.file:i,e.abrupt("return",{tracklist:o,title:c,cover:s});case 15:throw new M;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){return{id:T(),name:""}},J=function(e){return W.parseBlob(e,{skipCovers:!0}).then((function(t){var r=t.common,n=r.title,a=r.artists,l=[];return a&&(l=a.map((function(e){return{name:e,id:T()}}))),l.push(Q()),{id:T(),audio:e,title:n||"",artists:l}}))},X=function(e){return Promise.all(e.map(J))},$=new Map;$.set("en",(function(){return r.e(3).then(r.bind(null,204))})),$.set("ru",(function(){return r.e(4).then(r.bind(null,205))}));var ee=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,n,a,l,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.find((function(e){return $.has(e)})),n=void 0!==r?r:"en",a=$.get(n),l=Object(d.a)($.keys()),!a){e.next=12;break}return e.next=7,a();case 7:return o=e.sent,c=o.dictionary,e.abrupt("return",{currentCode:n,availableCodes:l,dictionary:c});case 12:throw new U;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(400);case 2:return e.abrupt("return",ee(["en"]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(f.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(400);case 2:return r=g(t),e.abrupt("return",r.map(h));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=a.createContext(n),ae=r(10),le=r(97),oe=a.createContext((function(e){0})),ce=Object(le.createEventBoundary)(oe),ue=a.createContext(null),ie={activeScreen:"LOADING",intl:null},se=function(e,t){switch(t.type){case"GET_INTL_SERVICE__RESOLVED":return{intl:t.payload,activeScreen:"PLAYER"};default:return e}},_e=function(e){var t=e.children,r=a.useReducer(se,ie),n=Object(ae.a)(r,2),l=n[0],o=n[1];return a.createElement(ce,{handler:o},a.createElement(ue.Provider,{value:l},t))},me=a.createContext({primaryControls:"OVERVIEW",secondaryControls:"PLAYBACK",playlist:[],playingTrackId:null,audioStatus:"PAUSED"}),fe=function(e){var t=e.playlist.findIndex((function(t){return t.id===e.playingTrackId}));if(t>-1){var r=e.playlist[t+1];return r?r.id:null}throw new TypeError};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ee={primaryControls:"OVERVIEW",secondaryControls:"PLAYBACK",playlist:[],playingTrackId:null,audioStatus:"PAUSED"},be=function(e,t){switch(t.type){case"FEED_ALBUM__ADD_TO_PLAYLIST":return 0===t.payload.length?e:pe({},e,{playlist:[].concat(Object(d.a)(e.playlist),Object(d.a)(t.payload)),playingTrackId:null===e.playingTrackId?t.payload[0].id:e.playingTrackId});case"FEED_ALBUM__PLAY":return 0===t.payload.length?e:pe({},e,{playlist:Object(d.a)(t.payload),playingTrackId:t.payload[0].id,audioStatus:"PENDING"});case"AUDIO__WAITING":return pe({},e,{audioStatus:"PENDING"});case"AUDIO__PLAYING":case"PLAYBACK_CONTROLS__PLAY":return pe({},e,{audioStatus:"PLAYING"});case"AUDIO__PAUSED":case"PLAYBACK_CONTROLS__PAUSE":return pe({},e,{audioStatus:"PAUSED"});case"AUDIO__ENDED":var r=fe(e),n=e.playlist[0].id;return pe({},e,{playingTrackId:null!==r?r:n,audioStatus:null!==r?"PLAYING":"PAUSED"});case"AUDIO__FAILED":return pe({},e,{audioStatus:"FAILED"});case"PLAYLIST_CONTROLS__PLAY_NEXT":var a=fe(e),l=e.playlist[0].id;return pe({},e,{playingTrackId:null!==a?a:l});case"PLAYLIST_CONTROLS__PLAY_PREVIOUS":var o=function(e){var t=e.playlist.findIndex((function(t){return t.id===e.playingTrackId}));if(t>-1){var r=e.playlist[t-1];return r?r.id:null}throw new TypeError}(e),c=e.playlist[0].id;return pe({},e,{playingTrackId:null!==o?o:c});case"PLAYLIST_TRACK__PLAY":return pe({},e,{playingTrackId:t.payload,audioStatus:"PENDING"});case"PLAYLIST_TRACK__REMOVE":var u=e.playlist.filter((function(e){return e.id!==t.payload}));return 0===u.length?pe({},Ee):e.playingTrackId===t.payload?pe({},e,{playlist:u,playingTrackId:fe(e)}):pe({},e,{playlist:u});case"PLAYLIST_POPUP__CLEAR":return pe({},Ee);case"OVERVIEW_CONTROLS__OPEN_SEARCH":return pe({},e,{primaryControls:"SEARCH"});case"SEARCH_CONTROLS__SUBMIT":case"SEARCH_CONTROLS__CANCEL":return pe({},e,{primaryControls:"OVERVIEW"});case"PLAYLIST_CONTROLS__CLOSE":return pe({},e,{secondaryControls:"PLAYBACK"});case"PLAYBACK_CONTROLS__OPEN_PLAYLIST":return pe({},e,{secondaryControls:"PLAYLIST"});default:return e}},ve=function(e){var t=e.children,r=a.useReducer(be,Ee),n=Object(ae.a)(r,2),l=n[0],o=n[1];return a.createElement(ce,{handler:o},a.createElement(me.Provider,{value:l},t))},Ae=function(){return l.a.useContext(ne)},ye=r(98).usePromise,Oe=function(){return l.a.useContext(oe)};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function he(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Pe=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Te=l.a.createElement("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),Se=function(e){var t=e.svgRef,r=e.title,n=he(e,["svgRef","title"]);return l.a.createElement("svg",ge({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Pe,Te)},Ce=l.a.forwardRef((function(e,t){return l.a.createElement(Se,ge({svgRef:t},e))})),Ie=(r.p,Ce),Le="APP__WRAPPER",Re="APP__LOADER",ke="PAGE_WRAPPER",Ne="PAGE_LOADER",we="HEADER__PANEL",je="HEADER__SEARCH_BUTTON",De="HEADER__NAVIGATION_BUTTON",Be="PLAYER_NAVIGATION__POPUP",xe="PLAYER_NAVIGATION__LATEST_ALBUMS_LINK",Fe="PLAYER_NAVIGATION__SHARE_ALBUM_LINK",Me="SEARCH_BAR__INPUT",Ue="SEARCH_BAR__FORM",We="SEARCH_BAR__CLEAR_BUTTON",Ve="LATEST_LABUMS_PAGE__FALLBACK",Ge="LATEST_LABUMS_PAGE__FEED",He="LATEST_LABUMS_PAGE__LOAD_MORE_BUTTON",Ye="LATEST_LABUMS_PAGE__FEED_LOADER",ze="SEARCH_ALBUMS_PAGE__TITLE",Ke="SEARCH_ALBUMS_PAGE__SUB_TITLE",Ze="SEARCH_ALBUMS_PAGE__LOADER",qe="SEARCH_ALBUMS_PAGE__FEED",Qe="SEARCH_ALBUMS_PAGE__NEW_RESULTS_BUTTON",Je="SEARCH_ALBUMS_PAGE__FALLBACK_BUTTON",Xe="FEED_ALBUM_WRAPPER",$e="SHARE_ALBUM_PAGE__LOADER",et="SHARE_ALBUM_PAGE__DROP_ZONE_INPUT",tt="SHARE_ALBUM_PAGE__DROP_ZONE_TEXT",rt="SHARE_ALBUM_PAGE__ALBUM_EDITOR",nt="ALBUM_EDITOR__TITLE_INPUT",at="ALBUM_EDITOR__SUBMIT_BUTTON",lt="ALBUM_EDITOR__CANCEL_BUTTON",ot="ALBUM_TRACK_EDITOR__WRAPPER",ct="ALBUM_TRACK_EDITOR__TITLE_INPUT",ut="ALBUM_TRACK_EDITOR__TITLE_VALIDATION",it="ALBUM_TRACK_EDITOR__REMOVE_BUTTON",st="ALBUM_ARTIST_EDITOR__ARTIST_NAME_INPUT",_t="ALBUM_ARTIST_EDITOR__ARTIST_NAME_VALIDATION",mt="ALBUM_TRACKLIST__VALIDATION",ft="ALBUM_TRACKLIST__TRACK_INPUT",dt=r(36),pt=r(78),Et=r.n(pt),bt=function(e){var t=e.hasToggledOnIndicator,r=e.testId,n=Object(dt.a)(e,["hasToggledOnIndicator","testId"]);return a.createElement("button",Object.assign({},n,{className:"".concat(Et.a.SquareButton__Button," ").concat(!0===t?Et.a.SquareButton__Button_toggledOn:""),"data-testid":r}))},vt=r(23),At="/latest",yt=function(){return"/latest"},Ot="/search/:query",gt=function(e){return"/search/".concat(e)},ht="/share",Pt=function(){return"/share"};function Tt(e,t){a.useEffect((function(){var r=function(r){var n=e.current,a=r.target;a instanceof HTMLElement&&n instanceof HTMLElement&&!n.contains(a)&&t()};return window.addEventListener("click",r),function(){window.removeEventListener("click",r)}}),[e,t])}var St=r(68),Ct=r.n(St),It=function(e){var t=e.children,r=e.position,n=e.testId,l=function(){var e=Ct.a.FixedPanel__Wrapper;if("top"===r)return"".concat(e," ").concat(Ct.a.FixedPanel__Wrapper_top);if("bottom"===r)return"".concat(e," ").concat(Ct.a.FixedPanel__Wrapper_bottom);throw new x}();return a.createElement("div",{className:l,"data-testid":n},t)},Lt=r(47),Rt=r.n(Lt),kt=function(e){var t=e.onOutsideClick,r=e.children,n=a.useRef(null);return Tt(n,t),a.createElement(It,{position:"top"},a.createElement("div",{ref:n,className:Rt.a.SearchControls__Wrapper},r))},Nt=function(e){return a.createElement("form",Object.assign({},e,{className:Rt.a.SearchControls__Form,"data-testid":Ue}))},wt=function(e){return a.createElement("input",Object.assign({},e,{type:"text",autoFocus:!0,className:Rt.a.SearchControls__Input,"data-testid":Me}))},jt=function(e){var t,r=a.useState(""),n=Object(ae.a)(r,2),l=n[0],o=n[1],c=Oe(),u=Object(vt.g)(),i=a.useCallback((function(e){var t=e.currentTarget.value;o(t)}),[]),s=a.useCallback((function(e){e.preventDefault(),u.push(gt(l)),c({type:"SEARCH_CONTROLS__SUBMIT",payload:l})}),[c,u,l]),_=a.useCallback((function(){c({type:"SEARCH_CONTROLS__CANCEL"})}),[c]);return t={Escape:_},a.useEffect((function(){var e=function(e){var r=t[e.key];r&&r(e)};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}})),a.createElement(kt,{onOutsideClick:_},a.createElement(Nt,{onSubmit:s},a.createElement(wt,{onChange:i,value:l})),a.createElement(bt,{testId:We,onClick:_},a.createElement(Ie,null)))};function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var xt=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Ft=l.a.createElement("path",{d:"M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1z"}),Mt=function(e){var t=e.svgRef,r=e.title,n=Bt(e,["svgRef","title"]);return l.a.createElement("svg",Dt({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,xt,Ft)},Ut=l.a.forwardRef((function(e,t){return l.a.createElement(Mt,Dt({svgRef:t},e))})),Wt=(r.p,Ut);function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Gt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ht=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Yt=l.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),zt=function(e){var t=e.svgRef,r=e.title,n=Gt(e,["svgRef","title"]);return l.a.createElement("svg",Vt({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Ht,Yt)},Kt=l.a.forwardRef((function(e,t){return l.a.createElement(zt,Vt({svgRef:t},e))})),Zt=(r.p,Kt);function qt(e){var t=a.useContext(e);if(null===t)throw new B;return t}var Qt=function(){return qt(ue)},Jt=function(){var e=Qt().intl;if(e)return e;throw new B},Xt=function(){return Jt().dictionary},$t=r(59),er=r.n($t),tr=function(e){var t=e.children,r=e.onOutsideClick,n=a.useRef(null);return Tt(n,r),a.createElement("nav",{ref:n,"data-testid":Be,className:er.a.PlayerNavigation__Popup},t)},rr=function(e){var t=e.text,r=e.to,n=e.testId,l=e.onClick;return a.createElement(u.b,{to:r,onClick:l,className:er.a.PlayerNavigation__Link,activeClassName:er.a.PlayerNavigation__Link_current,"data-testid":n},t)},nr=function(e){var t=e.onClose,r=Xt().playerNavigation,n=r.latestAlbumsLinkText,l=r.shareAlbumLinkText;return a.createElement(tr,{onOutsideClick:t},a.createElement(rr,{text:n,onClick:t,to:yt(),testId:xe}),a.createElement(rr,{text:l,onClick:t,to:Pt(),testId:Fe}))},ar=r(60),lr=r.n(ar),or=function(e){var t=e.children;return a.createElement(It,{position:"top",testId:we},a.createElement("div",{className:lr.a.OverviewControls__Wrapper},t))},cr=function(e){var t,r=e.children,n=e.mod;return"nav"===n&&(t=lr.a.OverviewControls__Group_nav),"search"===n&&(t=lr.a.OverviewControls__Group_search),a.createElement("div",{className:t},r)},ur=function(e){var t=a.useState(!1),r=Object(ae.a)(t,2),n=r[0],l=r[1],o=Oe(),c=a.useCallback((function(){l(!0)}),[]),u=a.useCallback((function(){l(!1)}),[]),i=a.useCallback((function(){o({type:"OVERVIEW_CONTROLS__OPEN_SEARCH"})}),[o]);return a.createElement(or,null,a.createElement(cr,{mod:"nav"},a.createElement(bt,{testId:De,onClick:c},a.createElement(Wt,null)),n&&a.createElement(nr,{onClose:u})),a.createElement(cr,{mod:"search"},a.createElement(bt,{testId:je,onClick:i},a.createElement(Zt,null))))},ir=l.a.createContext(null);function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mr={latestPage:1,loading:!1,albums:[],noMoreAlbums:!1},fr=function(e,t){switch(t.type){case"LATEST_ALBUMS_PAGE__LOAD_MORE":return _r({},e,{latestPage:e.latestPage+1});case"GET_LATEST_ALBUMS_SERVICE__PENDING":return _r({},e,{loading:!0});case"GET_LATEST_ALBUMS_SERVICE__RESOLVED":return _r({},e,{loading:!1,albums:[].concat(Object(d.a)(e.albums),Object(d.a)(t.payload.albums)),noMoreAlbums:t.payload.lastPageFlag});case"GET_LATEST_ALBUMS_SERVICE__REJECTED":return _r({},e,{loading:!1});default:return e}},dr=function(e){var t=e.children,r=a.useReducer(fr,mr),n=Object(ae.a)(r,2),l=n[0],o=n[1];return a.createElement(ce,{handler:o},a.createElement(ir.Provider,{value:l},t))},pr=r(49),Er=r.n(pr),br=function(e){var t=e.children,r=e.centered,n=e.hasCompactView;return a.createElement("main",{className:"".concat(Er.a.Page__Wrapper," ").concat(!0===r?Er.a.Page__Wrapper_centered:""," ").concat(!0===n?Er.a.Page__Wrapper_compact:""),"data-testid":ke},t)};function vr(){return(vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ar(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var yr=l.a.createElement("path",{fill:"none",d:"M.01 0h24v24h-24V0z"}),Or=l.a.createElement("path",{d:"M12 4V2.21c0-.45-.54-.67-.85-.35l-2.8 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.32.31.86.09.86-.36V6c3.31 0 6 2.69 6 6 0 .79-.15 1.56-.44 2.25-.15.36-.04.77.23 1.04.51.51 1.37.33 1.64-.34.37-.91.57-1.91.57-2.95 0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-.79.15-1.56.44-2.25.15-.36.04-.77-.23-1.04-.51-.51-1.37-.33-1.64.34C4.2 9.96 4 10.96 4 12c0 4.42 3.58 8 8 8v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V18z"}),gr=function(e){var t=e.svgRef,r=e.title,n=Ar(e,["svgRef","title"]);return l.a.createElement("svg",vr({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,yr,Or)},hr=l.a.forwardRef((function(e,t){return l.a.createElement(gr,vr({svgRef:t},e))})),Pr=(r.p,hr),Tr=r(101),Sr=r.n(Tr),Cr=function(){return l.a.createElement(Pr,{className:Sr.a.Spinner})},Ir=function(){return l.a.createElement("div",{className:Er.a.Page__Loader,"data-testid":Ne},l.a.createElement(Cr,null))},Lr=function(){return l.a.useContext(me)},Rr=function(e){var t=e.children,r=e.centered,n=e.hasLoader,l=null!==Lr().playingTrackId;return a.createElement(br,{hasCompactView:l,centered:!0===r||!0===n},!0===n?a.createElement(Ir,null):t)},kr=r(102),Nr=r.n(kr),wr=function(e){var t=e.onClick,r=e.disabled,n=e.hasLoader,l=e.text,o=e.buttonTestId,c=e.loaderTestId;return a.createElement("button",{className:Nr.a.LoadMoreButton,"data-testid":o,onClick:t,disabled:r},!0===n?a.createElement("div",{"data-testid":c},a.createElement(Cr,null)):l)};function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Br=l.a.createElement("path",{d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"}),xr=function(e){var t=e.svgRef,r=e.title,n=Dr(e,["svgRef","title"]);return l.a.createElement("svg",jr({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Br)},Fr=l.a.forwardRef((function(e,t){return l.a.createElement(xr,jr({svgRef:t},e))})),Mr=(r.p,Fr);function Ur(){return(Ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Vr=l.a.createElement("path",{d:"M13 10H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1zm5 8v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-3c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1h-3zM3 16h6c.55 0 1-.45 1-1s-.45-1-1-1H3c-.55 0-1 .45-1 1s.45 1 1 1z"}),Gr=function(e){var t=e.svgRef,r=e.title,n=Wr(e,["svgRef","title"]);return l.a.createElement("svg",Ur({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Vr)},Hr=l.a.forwardRef((function(e,t){return l.a.createElement(Gr,Ur({svgRef:t},e))})),Yr=(r.p,Hr),zr=r(37),Kr=r.n(zr),Zr=function(e){var t=e.children;return a.createElement("div",{className:Kr.a.AlbumCover__Wrapper},t)},qr=function(e){var t=e.src;return a.createElement("img",{alt:"TODO",src:t,className:Kr.a.AlbumCover__Image})},Qr=function(e){var t=e.children;return a.createElement("div",{className:Kr.a.AlbumCover__Actions},t)},Jr=function(e){var t=e.children,r=e.onClick;return a.createElement("button",{className:Kr.a.AlbumCover__Button,onClick:r},t)},Xr=function(e){var t=e.imageSrc,r=e.onAddToPlaylist,n=e.onPlay;return l.a.createElement(Zr,null,l.a.createElement(qr,{src:t}),l.a.createElement(Qr,null,l.a.createElement(Jr,{onClick:r},l.a.createElement(Yr,null)),l.a.createElement(Jr,{onClick:n},l.a.createElement(Mr,null))))},$r=r(38),en=r.n($r),tn=function(e){return a.createElement("div",Object.assign({className:en.a.FeedAlbum__Wrapper},e,{"data-testid":Xe}))},rn=function(e){return a.createElement("div",{className:en.a.FeedAlbum__Info},e.children)},nn=function(e){return a.createElement("div",{className:en.a.FeedAlbum__Title},e.children)},an=function(e){return a.createElement("div",{className:en.a.FeedAlbum__Artist},e.children)},ln=function(e){var t=e.data,r=Oe(),n=Ae().getPlaylistTracksByAlbumId,l=t.title,o=t.artistName,c=t.coverSrc,u=t.id,i=a.useCallback((function(){n(u).then((function(e){r({type:"FEED_ALBUM__ADD_TO_PLAYLIST",payload:e})}))}),[r,n,u]),s=a.useCallback((function(){n(u).then((function(e){r({type:"FEED_ALBUM__PLAY",payload:e})}))}),[r,n,u]);return a.createElement(tn,null,a.createElement(Xr,{imageSrc:c,onAddToPlaylist:i,onPlay:s}),a.createElement(rn,null,a.createElement(nn,null,l),a.createElement(an,null,o)))},on=r(50),cn=r.n(on),un=function(e){var t=e.children,r=e.mod,n=a.useMemo((function(){switch(r){case"feed":return Ge;default:return null}}),[r]),l=a.useMemo((function(){switch(r){case"feed":return cn.a.LatestAlbumsPage__Wrapper_feed;default:return""}}),[r]),o="".concat(cn.a.LatestAlbumsPage__Wrapper," ").concat(l);return a.createElement("div",{className:o,"data-testid":n},t)},sn=function(e){var t=e.text,r=e.mod,n=a.useMemo((function(){switch(r){case"fallback":return Ve;default:return null}}),[r]),l=a.useMemo((function(){switch(r){case"fallback":return cn.a.LatestAlbumsPage__Text_fallback;default:return""}}),[r]),o="".concat(cn.a.LatestAlbumsPage__Text," ").concat(l);return a.createElement("div",{className:o,"data-testid":n},t)},_n=function(e){var t=e.hasLoadMoreButton,r=e.hasPageLoader,n=e.hasFeed,l=e.hasFeedLoader,o=e.hasFallback,c=e.albums,u=e.fallbackText,i=e.loadMoreButtonText,s=e.onLoadMoreButtonClick,_=a.useMemo((function(){return c.map((function(e){return a.createElement(ln,{data:e,key:e.id})}))}),[c]);return a.createElement(Rr,{hasLoader:r,centered:o},n&&a.createElement(un,{mod:"feed"},_),o&&a.createElement(sn,{mod:"fallback",text:u}),t&&a.createElement(wr,{text:i,hasLoader:l,onClick:s,buttonTestId:He,loaderTestId:Ye}))},mn=function(e){var t=function(){var e=Ae().getLatestAlbums,t=ye(),r=Object(ae.a)(t,2),n=r[0],l=r[1],o=Oe();return a.useEffect((function(){n&&n.pending&&o({type:"GET_LATEST_ALBUMS_SERVICE__PENDING"})}),[o,n]),a.useEffect((function(){if(n&&n.value){var e=n.value,t=e.items,r=e.lastPageFlag;o({type:"GET_LATEST_ALBUMS_SERVICE__RESOLVED",payload:{albums:t,lastPageFlag:r}})}}),[o,n]),a.useEffect((function(){n&&n.error&&o({type:"GET_LATEST_ALBUMS_SERVICE__REJECTED",payload:n.error})}),[o,n]),a.useCallback((function(t){l(e({startPage:t}))}),[e,l])}(),r=Xt().latestAlbumsPage,n=r.fallbackText,l=r.loadMoreButtonText,o=Oe(),c=qt(ir),u=c.albums,i=c.loading,s=c.latestPage,_=c.noMoreAlbums;a.useEffect((function(){null!==s&&t(s)}),[t,s]);var m=1===s&&i,f=u.length>0,d=u.length>0&&i,p=0===u.length&&_,E={hasLoadMoreButton:u.length>0&&!_,hasPageLoader:m,hasFeed:f,hasFeedLoader:d,hasFallback:p,albums:u,fallbackText:n,loadMoreButtonText:l,onLoadMoreButtonClick:a.useCallback((function(){i||o({type:"LATEST_ALBUMS_PAGE__LOAD_MORE"})}),[o,i])};return a.createElement(_n,E)},fn=function(){return l.a.createElement(dr,null,l.a.createElement(mn,null))},dn=a.createContext(null),pn=function(e){var t=e.title,r=e.cover,n=e.tracklist,a=[];return t||a.push({type:"TITLE_REQUIRED"}),r||a.push({type:"COVER_REQUIRED"}),0===n.length&&a.push({type:"EMPTY_TRACKLIST"}),n.forEach((function(e){e.title||a.push({type:"EMPTY_TRACK_TITLE",payload:e.id}),1!==e.artists.length||e.artists[0].name||a.push({type:"EMPTY_TRACK_ARTISTS",payload:e.id})})),a};function En(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?En(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):En(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vn=function e(t){return{done:function(){return t},addTracks:function(r){var n=bn({},t,{tracklist:[].concat(Object(d.a)(t.tracklist),Object(d.a)(r))});return e(n)},removeTrack:function(r){var n=t.tracklist.filter((function(e){return e.id!==r})),a=bn({},t,{tracklist:n});return e(a)},setTrackTitle:function(r){var n=r.trackId,a=r.value,l=t.tracklist.reduce((function(e,t){if(t.id===n){var r=bn({},t,{title:a});return[].concat(Object(d.a)(e),[r])}return[].concat(Object(d.a)(e),[t])}),[]),o=bn({},t,{tracklist:l});return e(o)},addRawArtists:function(){var r=t.tracklist.map((function(e){var t=e.artists,r=t[t.length-1];return!r||r.name?bn({},e,{artists:[].concat(Object(d.a)(t),[Q()])}):e})),n=bn({},t,{tracklist:r});return e(n)},removeArtist:function(r){var n=r.trackId,a=r.artistId,l=t.tracklist.reduce((function(e,t){if(t.id===n){var r=t.artists.filter((function(e){return e.id!==a})),l=bn({},t,{artists:r});return[].concat(Object(d.a)(e),[l])}return[].concat(Object(d.a)(e),[t])}),[]),o=bn({},t,{tracklist:l});return e(o)},setArtistName:function(r){var n=r.trackId,a=r.artistId,l=r.value,o=t.tracklist.reduce((function(e,t){if(t.id===n){var r=t.artists.reduce((function(e,t){if(t.id===a){var r=bn({},t,{name:l});return[].concat(Object(d.a)(e),[r])}return[].concat(Object(d.a)(e),[t])}),[]),o=bn({},t,{artists:r});return[].concat(Object(d.a)(e),[o])}return[].concat(Object(d.a)(e),[t])}),[]),c=bn({},t,{tracklist:o});return e(c)},moveTrack:function(r){var n=r.trackId,a=r.direction,l=t.tracklist,o=l.findIndex((function(e){return e.id===n})),c=Object(d.a)(l),u="DOWN"===a?o+1:o-1,i=[c[u],c[o]];c[o]=i[0],c[u]=i[1];var s=bn({},t,{tracklist:c});return e(s)}}};function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var On={screen:"SELECTING_FILES",files:null,albumFormData:null,albumFormValidation:[],didSucceed:!1,submited:!1,error:null},gn=function(e,t){switch(t.type){case"ALBUM_EDITOR__TITLE_CHANGE":if(e.albumFormData){var r=yn({},e.albumFormData,{title:t.payload});return yn({},e,{albumFormData:r,albumFormValidation:pn(r)})}return e;case"ALBUM_COVER_EDITOR__FILE_RECIEVED":if(e.albumFormData){var n=yn({},e.albumFormData,{cover:t.payload});return yn({},e,{albumFormData:n,albumFormValidation:pn(n)})}return e;case"ALBUM_TRACK_EDITOR__MOVE_UP":if(e.albumFormData){var a=vn(e.albumFormData).moveTrack({trackId:t.payload,direction:"UP"}).done();return yn({},e,{albumFormData:a,albumFormValidation:pn(a)})}return e;case"ALBUM_TRACK_EDITOR__MOVE_DOWN":if(e.albumFormData){var l=vn(e.albumFormData).moveTrack({trackId:t.payload,direction:"DOWN"}).done();return yn({},e,{albumFormData:l,albumFormValidation:pn(l)})}return e;case"ALBUM_TRACK_EDITOR__TITLE_CHANGE":if(e.albumFormData){var o=t.payload,c=o.trackId,u=o.value,i=vn(e.albumFormData).setTrackTitle({trackId:c,value:u}).done();return yn({},e,{albumFormData:i,albumFormValidation:pn(i)})}return e;case"ALBUM_TRACK_EDITOR__ARTIST_CHANGE":if(e.albumFormData){var s=t.payload,_=s.trackId,m=s.artistId,f=s.value,d=e.albumFormData;return yn({},e,{albumFormData:d=f?vn(d).setArtistName({trackId:_,artistId:m,value:f}).addRawArtists().done():vn(d).removeArtist({trackId:_,artistId:m}).addRawArtists().done(),albumFormValidation:pn(d)})}return e;case"ALBUM_TRACK_EDITOR__REMOVE":if(e.albumFormData){var p=vn(e.albumFormData).removeTrack(t.payload).done();return yn({},e,{albumFormData:p,albumFormValidation:pn(p)})}return e;case"ALBUM_EDITOR__CANCEL":return yn({},e,{screen:"SELECTING_FILES",albumFormData:null,albumFormValidation:[]});case"PROCESS_FILES_SERVICE__PENDING":return"SELECTING_FILES"===e.screen?yn({},e,{screen:"LOADING"}):e;case"SUBMIT_ALBUM_SERVICE__PENDING":return yn({},e,{screen:"LOADING"});case"PROCESS_FILES_SERVICE__RESOLVED":if(e.albumFormData){var E=e.albumFormData,b=vn(E).addTracks(t.payload.tracklist).addRawArtists().done();return yn({},e,{files:null,albumFormData:b,albumFormValidation:pn(b)})}var v=vn(t.payload).addRawArtists().done();return yn({},e,{files:null,screen:"EDITING_ALBUM",albumFormData:v,albumFormValidation:pn(v),didSucceed:!1,error:null});case"SUBMIT_ALBUM_SERVICE__RESOLVED":return yn({},e,{screen:"SELECTING_FILES",albumFormData:null,albumFormValidation:[],didSucceed:!0,submited:!1});case"SUBMIT_ALBUM_SERVICE__REJECTED":case"PROCESS_FILES_SERVICE__REJECTED":return yn({},e,{screen:"SELECTING_FILES",albumFormData:null,albumFormValidation:[],didSucceed:!1,submited:!1,error:t.payload});case"ALBUM_EDITOR__SUBMIT":return yn({},e,{submited:!0});case"DROP_ZONE__FILES_RECIEVED":case"ALBUM_AUDIO_EDITOR__TRACKS_RECIEVED":return yn({},e,{files:t.payload});default:return e}},hn=function(e){var t=e.children,r=a.useReducer(gn,On),n=Object(ae.a)(r,2),l=n[0],o=n[1];return a.createElement(ce,{handler:o},a.createElement(dn.Provider,{value:l},t))},Pn=function(){return qt(dn)},Tn=function(){var e=Pn().albumFormData;if(!e)throw new B;return e},Sn=function(){return Pn().albumFormValidation};function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function In(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ln=l.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"}),Rn=function(e){var t=e.svgRef,r=e.title,n=In(e,["svgRef","title"]);return l.a.createElement("svg",Cn({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Ln)},kn=l.a.forwardRef((function(e,t){return l.a.createElement(Rn,Cn({svgRef:t},e))})),Nn=(r.p,kn),wn=r(27),jn=r.n(wn),Dn=function(e){var t=e.children;return a.createElement("label",{className:jn.a.AlbumCoverEditor__Wrapper},t)},Bn=function(e){var t=e.onFileChange,r=e.errorMessage,n=void 0===r?"":r,l=a.useRef(null),o=a.useCallback((function(e){var r=e.currentTarget.files;r instanceof FileList&&(t(r[0]),e.currentTarget.value="")}),[t]);return a.useEffect((function(){var e=l.current;e&&e.setCustomValidity(n)}),[n]),a.createElement("input",{ref:l,className:jn.a.AlbumCoverEditor__Input,type:"file",name:"cover",onChange:o})},xn=function(e){return a.createElement("div",Object.assign({className:jn.a.AlbumCoverEditor__Preview},e))},Fn=function(e){var t=e.src;return a.createElement("img",{src:t,className:jn.a.AlbumCoverEditor__Image,alt:"cover"})},Mn=function(e){var t=e.text;return a.createElement("div",{className:jn.a.AlbumCoverEditor__Error},t)},Un=function(){var e=Oe(),t=function(){var e=Tn(),t=Sn(),r=Xt().albumCoverEditor.missingCoverValidationText;return{value:e.cover,errorMessage:t.reduce((function(e,t){switch(t.type){case"COVER_REQUIRED":return r;default:return e}}),void 0)}}(),r=t.value,n=t.errorMessage,o=a.useCallback((function(t){e({type:"ALBUM_COVER_EDITOR__FILE_RECIEVED",payload:t})}),[e]),c=function(e){var t=l.a.useMemo((function(){return e?URL.createObjectURL(e):null}),[e]);return l.a.useEffect((function(){if(null!==t)return function(){URL.revokeObjectURL(t)}}),[t]),t}(r);return a.createElement(Dn,null,a.createElement(Bn,{errorMessage:n,onFileChange:o}),a.createElement(xn,null,null!==c&&void 0===n?a.createElement(Fn,{src:c}):a.createElement(Nn,null)),void 0!==n&&a.createElement(Mn,{text:n}))},Wn=r(17),Vn=r.n(Wn),Gn=function(e){var t=e.children,r=e.onSubmit,n=a.useCallback((function(e){e.preventDefault(),r()}),[r]);return a.createElement("form",{className:Vn.a.AlbumEditor__Wrapper,"data-testid":rt,onSubmit:n},t)},Hn=function(e){var t=e.children;return a.createElement("div",{className:Vn.a.AlbumEditor__Footer},t)},Yn=function(e){var t=e.children,r=e.submit,n=e.testId,l=e.onClick;return a.createElement("button",{onClick:l,className:"".concat(Vn.a.AlbumEditor__Button," ").concat(!0===r?Vn.a.AlbumEditor__Button_primary:Vn.a.AlbumEditor__Button_secondary),type:!0===r?"submit":"button","data-testid":n},t)},zn=function(e){var t=e.children;return a.createElement("div",{className:Vn.a.AlbumEditor__Fieldset},t)},Kn=function(e){var t=e.text;return a.createElement("div",{className:Vn.a.AlbumEditor__FieldsetTitle},t)},Zn=function(e){var t=e.children,r=e.withPadding;return a.createElement("div",{className:"".concat(Vn.a.AlbumEditor__FieldsetBody," ").concat(!0===r?Vn.a.AlbumEditor__FieldsetBody_padding:"")},t)};function qn(){return(qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Jn=l.a.createElement("path",{d:"M8.12 14.71L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"}),Xn=function(e){var t=e.svgRef,r=e.title,n=Qn(e,["svgRef","title"]);return l.a.createElement("svg",qn({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Jn)},$n=l.a.forwardRef((function(e,t){return l.a.createElement(Xn,qn({svgRef:t},e))})),ea=(r.p,$n);function ta(){return(ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ra(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var na=l.a.createElement("path",{d:"M8.12 9.29L12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7c-.39-.39-.39-1.02 0-1.41.39-.38 1.03-.39 1.42 0z"}),aa=function(e){var t=e.svgRef,r=e.title,n=ra(e,["svgRef","title"]);return l.a.createElement("svg",ta({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,na)},la=l.a.forwardRef((function(e,t){return l.a.createElement(aa,ta({svgRef:t},e))})),oa=(r.p,la);function ca(){return(ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ua(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ia=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),sa=l.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"}),_a=function(e){var t=e.svgRef,r=e.title,n=ua(e,["svgRef","title"]);return l.a.createElement("svg",ca({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,ia,sa)},ma=l.a.forwardRef((function(e,t){return l.a.createElement(_a,ca({svgRef:t},e))})),fa=(r.p,ma),da=r(22),pa=r.n(da),Ea=function(e){return a.createElement("div",Object.assign({},e,{className:pa.a.AlbumTrackEditor__Wrapper,"data-testid":ot}))},ba=function(e){var t=e.isDisabled,r=e.testId,n=Object(dt.a)(e,["isDisabled","testId"]);return a.createElement("button",Object.assign({},n,{type:"button",disabled:t,className:pa.a.AlbumTrackEditor__Button,"data-testid":r}))},va=function(e){return a.createElement("div",Object.assign({},e,{className:pa.a.AlbumTrackEditor__Controls}))},Aa=function(e){return a.createElement("div",Object.assign({},e,{className:pa.a.AlbumTrackEditor__Common}))},ya=r(61),Oa=r.n(ya),ga=function(e){var t=e.validationMessage,r=void 0===t?"":t,n=e.inputTestId,l=e.validationTestId,o=Object(dt.a)(e,["validationMessage","inputTestId","validationTestId"]),c=a.useRef(null);return a.useEffect((function(){var e=c.current;e&&e.setCustomValidity(r)}),[r]),a.createElement("label",{className:Oa.a.FloatingLabelInput__Wrapper},a.createElement("input",Object.assign({},o,{ref:c,className:Oa.a.FloatingLabelInput__Input,"data-testid":n})),a.createElement("span",{className:Oa.a.FloatingLabelInput__Placeholder},o.placeholder),a.createElement("small",{className:Oa.a.FloatingLabelInput__ValidationMessage,"data-testid":l},r))},ha=function(e){var t=e.trackId,r=Xt().albumTrackEditor.titleInputPlaceholderText,n=function(e){var t=Tn().tracklist,r=Xt().albumTrackEditor.missingTitleValidationText,n=Sn(),a=t.find((function(t){return t.id===e}));if(!a)throw new TypeError;return{value:a.title,validationMessage:n.reduce((function(t,n){return"EMPTY_TRACK_TITLE"===n.type&&n.payload===e?r:t}),void 0)}}(t),l=n.value,o=n.validationMessage,c=Oe(),u=a.useCallback((function(e){var r=e.currentTarget.value;c({type:"ALBUM_TRACK_EDITOR__TITLE_CHANGE",payload:{value:r,trackId:t}})}),[c,t]);return a.createElement(ga,{inputTestId:ct,validationTestId:ut,name:"title",value:l,validationMessage:o,placeholder:r,onChange:u})},Pa=function(e){var t,r=e.trackId,n=e.artist,l=e.artistIndex,o=Xt().albumTrackEditor,c=o.missingArtistNameValidationText,u=o.artistNameInputPlaceholderText,i=Oe(),s=(t={trackId:r,artistId:n.id},!Sn().some((function(e){return"EMPTY_TRACK_ARTISTS"===e.type&&e.payload===t.trackId}))),_=a.useCallback((function(e){var t=e.currentTarget.value;i({type:"ALBUM_TRACK_EDITOR__ARTIST_CHANGE",payload:{trackId:r,artistId:n.id,value:t}})}),[n.id,i,r]),m=s?void 0:c;return a.createElement(ga,{inputTestId:st,validationTestId:_t,key:n.id,name:"name",value:n.name,validationMessage:m,placeholder:u(l+1),onChange:_})};function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sa(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ca=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Ia=l.a.createElement("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.41l-4.83-4.83c-.37-.38-.88-.59-1.41-.59H6zm7 6V3.5L18.5 9H14c-.55 0-1-.45-1-1z"}),La=function(e){var t=e.svgRef,r=e.title,n=Sa(e,["svgRef","title"]);return l.a.createElement("svg",Ta({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Ca,Ia)},Ra=l.a.forwardRef((function(e,t){return l.a.createElement(La,Ta({svgRef:t},e))})),ka=(r.p,Ra),Na=function(e){var t=e.text;return a.createElement("div",{className:pa.a.AlbumTrackEditor__FileInfo},a.createElement(ka,{className:pa.a.AlbumTrackEditor__FileIcon}),a.createElement("span",{className:pa.a.AlbumTrackEditor__FileName},t))},wa=function(e){var t=e.trackId,r=function(e){var t=Tn().tracklist.find((function(t){return t.id===e}));if(!t)throw new B;return t}(t),n=a.useMemo((function(){return r.artists.map((function(e,r){return a.createElement(Pa,{key:e.id,trackId:t,artist:e,artistIndex:r})}))}),[r.artists,t]);return a.createElement(Aa,null,a.createElement(Na,{text:r.audio.name}),a.createElement(ha,{trackId:t}),n)},ja=function(e){var t=e.trackId,r=e.moveDownDisabled,n=e.moveUpDisabled,l=Oe(),o=a.useCallback((function(){l({type:"ALBUM_TRACK_EDITOR__REMOVE",payload:t})}),[l,t]),c=a.useCallback((function(){l({type:"ALBUM_TRACK_EDITOR__MOVE_UP",payload:t})}),[l,t]),u=a.useCallback((function(){l({type:"ALBUM_TRACK_EDITOR__MOVE_DOWN",payload:t})}),[l,t]);return a.createElement(Ea,null,a.createElement(wa,{trackId:t}),a.createElement(va,null,a.createElement(ba,{isDisabled:n,onClick:c},a.createElement(ea,null)),a.createElement(ba,{isDisabled:r,onClick:u},a.createElement(oa,null)),a.createElement(ba,{onClick:o,testId:it},a.createElement(fa,null))))},Da=r(39),Ba=r.n(Da),xa=function(e){var t=e.onFilesChange,r=e.validationMessage,n=void 0===r?"":r,l=a.useRef(null),o=a.useCallback((function(e){var r=e.currentTarget.files;r&&t(r)}),[t]);return a.useEffect((function(){var e=l.current;e&&e.setCustomValidity(n)}),[n]),a.createElement("input",{ref:l,className:Ba.a.AlbumAudioEditor__Input,type:"file",name:"tracks",onChange:o})},Fa=function(e){var t=e.children;return a.createElement("label",{className:Ba.a.AlbumAudioEditor__Wrapper},t)},Ma=function(e){var t=e.text,r=e.validationMessage,n=e.validationTestId;return a.createElement("div",{className:Ba.a.AlbumAudioEditor__Label},a.createElement("div",{className:Ba.a.AlbumAudioEditor__Text},t),a.createElement("small",{className:Ba.a.AlbumAudioEditor__Error,"data-testid":n},r))},Ua=function(){var e=Xt().albumAudioEditor,t=e.missingAudioValidationText,r=e.labelText,n=Oe(),l=!Sn().some((function(e){return"EMPTY_TRACKLIST"===e.type})),o=a.useMemo((function(){if(!l)return t}),[t,l]),c=a.useCallback((function(e){var t=Object(d.a)(e);n({type:"ALBUM_AUDIO_EDITOR__TRACKS_RECIEVED",payload:t})}),[n]);return a.createElement(Fa,null,a.createElement(xa,{validationMessage:o,onFilesChange:c,testId:ft}),a.createElement(Ma,{text:r,validationMessage:o,validationTestId:mt}))},Wa=function(){var e=Xt().albumEditor.tracklistFieldsetTitleText,t=Tn().tracklist,r=a.useMemo((function(){return t.map((function(e,t,r){return a.createElement(ja,{key:e.id,trackId:e.id,moveUpDisabled:0===t,moveDownDisabled:t===r.length-1})}))}),[t]);return a.createElement(zn,null,a.createElement(Kn,{text:e}),a.createElement(Zn,null,r),a.createElement(Ua,null))},Va=function(){var e=Xt().albumEditor,t=e.aboutFieldsetTitleText,r=e.albumTitleInputPlaceholderText,n=Oe(),l=function(){var e=Tn(),t=Sn();return{value:e.title,errorMessage:t.reduce((function(e,t){return"TITLE_REQUIRED"===t.type?"Title is required":e}),void 0)}}(),o=l.value,c=l.errorMessage,u=a.useCallback((function(e){n({type:"ALBUM_EDITOR__TITLE_CHANGE",payload:e.currentTarget.value})}),[n]);return a.createElement(zn,null,a.createElement(Kn,{text:t}),a.createElement(Zn,{withPadding:!0},a.createElement(ga,{name:"title",placeholder:r,value:o,validationMessage:c,onChange:u,inputTestId:nt})))},Ga=function(){var e=Xt().albumEditor,t=e.submitButtonText,r=e.cancelButtonText,n=Oe(),l=a.useCallback((function(){n({type:"ALBUM_EDITOR__SUBMIT"})}),[n]),o=a.useCallback((function(){n({type:"ALBUM_EDITOR__CANCEL"})}),[n]);return a.createElement(Gn,{onSubmit:l},a.createElement(Un,null),a.createElement(Va,null),a.createElement(Wa,null),a.createElement(Hn,null,a.createElement(Yn,{submit:!0,testId:at},t),a.createElement(Yn,{onClick:o,testId:lt},r)))},Ha=r(25),Ya=r.n(Ha),za=function(e){var t=e.children;return a.createElement("div",{className:Ya.a.DropZone__Wrapper},t)},Ka=function(e){var t=e.children;return a.createElement("label",{className:Ya.a.DropZone__Label},t)},Za=function(e){var t=e.onFilesChange,r=a.useCallback((function(e){var r=e.currentTarget.files;r&&(t(r),e.currentTarget.value="")}),[t]);return a.createElement("input",{type:"file",multiple:!0,className:Ya.a.DropZone__Input,onChange:r,"data-testid":et})},qa=function(e){var t=e.mainText,r=e.errorText,n=e.successText;return a.createElement("div",{className:Ya.a.DropZone__Text,"data-testid":tt},void 0!==r&&a.createElement("div",{className:Ya.a.DropZone__ErrorText},r),void 0!==n&&a.createElement("div",{className:Ya.a.DropZone__SuccessText},n),a.createElement("div",{className:Ya.a.DropZone__MainText},t))},Qa=function(e){var t=e.errorText,r=e.successText,n=Xt().dropZone.mainText,l=Oe(),o=a.useCallback((function(e){var t=Object(d.a)(e);l({type:"DROP_ZONE__FILES_RECIEVED",payload:t})}),[l]);return a.createElement(za,null,a.createElement(Ka,null,a.createElement(Za,{onFilesChange:o}),a.createElement(qa,{mainText:n,errorText:t,successText:r})))},Ja=r(81),Xa=r.n(Ja),$a=function(){return l.a.createElement("div",{className:Xa.a.ShareAlbumPage__Loader,"data-testid":$e},l.a.createElement(Pr,{className:Xa.a.ShareAlbumPage__Spinner}))},el=function(){var e=Pn(),t=e.screen,r=e.error,n=e.files,o=e.albumFormData,c=e.didSucceed,u=e.submited,i=function(){var e=ye(),t=Object(ae.a)(e,2),r=t[0],n=t[1],a=Oe();l.a.useLayoutEffect((function(){if(r){var e=r.pending,t=r.resolved,n=r.error;e&&a({type:"SUBMIT_ALBUM_SERVICE__PENDING"}),t&&a({type:"SUBMIT_ALBUM_SERVICE__RESOLVED"}),n&&a({type:"SUBMIT_ALBUM_SERVICE__REJECTED",payload:n})}}),[a,r]);var o=Ae().submitAlbum;return l.a.useCallback((function(e){e&&n(o(e))}),[n,o])}();a.useEffect((function(){u&&o&&i(o)}),[o,i,u]);var s=function(){var e=Ae().getAlbumFormDataFromFiles,t=ye({errorsToKeep:[M]}),r=Object(ae.a)(t,2),n=r[0],a=r[1],o=Oe();return l.a.useLayoutEffect((function(){if(n){var e=n.pending,t=n.value,r=n.error;e&&o({type:"PROCESS_FILES_SERVICE__PENDING"}),t&&o({type:"PROCESS_FILES_SERVICE__RESOLVED",payload:t}),r&&o({type:"PROCESS_FILES_SERVICE__REJECTED",payload:r})}}),[o,n]),l.a.useCallback((function(t){a(e(t))}),[a,e])}();a.useEffect((function(){n&&s(n)}),[n,s]);var _=Xt().shareAlbumPage.didSucceedText,m=r?r.message:void 0,f=c?_:void 0,d="LOADING"===t,p="SELECTING_FILES"===t,E="EDITING_ALBUM"===t;return a.createElement(Rr,{centered:d||p},d&&a.createElement($a,null),E&&a.createElement(Ga,null),p&&a.createElement(Qa,{errorText:m,successText:f}))},tl=function(){return l.a.createElement(hn,null,l.a.createElement(el,null))},rl=l.a.createContext(null);function nl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nl(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nl(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ll={failed:!1,albums:[],newAlbums:[]},ol=function(e,t){switch(t.type){case"GET_ALBUMS_BY_QUERY_SERVICE__RESOLVED":if(0===e.albums.length)return al({},e,{albums:t.payload});var r=t.payload.filter((function(t){var r=t.id;return e.albums.some((function(e){return e.id!==r}))}));return al({},e,{newAlbums:[].concat(Object(d.a)(e.newAlbums),Object(d.a)(r))});case"GET_ALBUMS_BY_QUERY_SERVICE__REJECTED":return al({},ll,{failed:!0});case"SEARCH_ALBUMS_PAGE__RETRY":return al({},e,{failed:!1});case"SEARCH_ALBUMS_PAGE__SHOW_NEW_RESULTS":return al({},e,{albums:[].concat(Object(d.a)(e.newAlbums),Object(d.a)(e.albums)),newAlbums:[]});case"SEARCH_ALBUMS_PAGE__NEW_QUERY":return al({},ll);default:return e}},cl=function(e){var t=e.children,r=a.useReducer(ol,ll),n=Object(ae.a)(r,2),l=n[0],o=n[1];return a.createElement(ce,{handler:o},a.createElement(rl.Provider,{value:l},t))},ul=r(14),il=r.n(ul),sl=function(e){var t=e.children;return a.createElement("div",{className:il.a.SearchAlbumsPage__Hero},t)},_l=function(e){var t=e.text,r=e.testId,n=e.onClick;return a.createElement("button",{className:il.a.SearchAlbumsPage__Button,"data-testid":r,onClick:n},t)},ml=function(e){var t=e.children,r=e.screen,n=function(){var e=il.a.SearchAlbumsPage__Wrapper;switch(r){case"LOADING":return il.a.SearchAlbumsPage__Wrapper_loading;case"FALLBACK":return il.a.SearchAlbumsPage__Wrapper_fallback;case"HAS_RESULTS":return il.a.SearchAlbumsPage__Wrapper_hasResults;case"HAS_NEW_RESULTS":return il.a.SearchAlbumsPage__Wrapper_hasNewResults;default:return e}}();return a.createElement(Rr,null,a.createElement("div",{className:n},t))},fl=function(e){var t=e.testId;return a.createElement("span",{className:il.a.SearchAlbumsPage__Loader,"data-testid":t},a.createElement(Cr,null))},dl=r(48),pl=r.n(dl),El=function(e){var t=e.children,r=e.testId;return a.createElement("div",{className:pl.a.AlbumsFeed__Wrapper,"data-testid":r},t)},bl=function(e){var t=e.onClick,r=e.text;return a.createElement("button",{className:pl.a.AlbumsFeed__Button,onClick:t},r)},vl=function(e){var t=e.children;return a.createElement("div",{className:pl.a.AlbumsFeed__Content},t)},Al=function(e){var t=e.children,r=e.testId,n=e.onLoadMore;return a.createElement(El,{testId:r},a.createElement(vl,null,t),n&&a.createElement(bl,{onClick:n,text:"load more"}))},yl=function(e){var t=e.children,r=e.testId;return a.createElement(Al,{testId:r},t)},Ol=function(e){var t=e.children;return a.createElement("div",{className:il.a.SearchAlbumsPage__Body},t)},gl=function(e){var t=e.text,r=e.testId;return a.createElement("h1",{className:il.a.SearchAlbumsPage__Title,"data-testid":r},t)},hl=function(e){var t=e.text,r=e.testId;return a.createElement("div",{className:il.a.SearchAlbumsPage__SubTitle,"data-testid":r},t)},Pl=function(e){var t=e.screen,r=e.titleText,n=e.subTitleText,l=e.fallbackSubTitleText,o=e.newResultsButtonText,c=e.fallbackButtonText,u=e.feedItems,i=e.onNewResultsButtonClick,s=e.onFallbackButtonClick,_=a.useMemo((function(){return u.map((function(e){return a.createElement(ln,{data:e,key:e.id})}))}),[u]);return a.createElement(ml,{screen:t},a.createElement(sl,null,a.createElement(gl,{text:r,testId:ze}),a.createElement(hl,{text:"FALLBACK"===t?l:n,testId:Ke})),a.createElement(Ol,null,"LOADING"===t&&a.createElement(fl,{testId:Ze}),"FALLBACK"===t&&a.createElement(_l,{testId:Je,text:c,onClick:s}),"HAS_NEW_RESULTS"===t&&a.createElement(_l,{testId:Qe,text:o,onClick:i}),("HAS_RESULTS"===t||"HAS_NEW_RESULTS"===t)&&a.createElement(yl,{testId:qe},_)))},Tl=function(e){var t=e.searchInterval,r=Xt().searchAlbumsPage,n=r.subTitleText,a=r.fallbackSubTitleText,o=r.newResultsButtonText,c=r.fallbackButtonText,u=function(){var e=Object(vt.h)();if("string"===typeof e.query)return e.query;throw new F}(),i=Oe(),s=function(){var e=Ae().getAlbumsByQuery,t=ye({errorsToKeep:[Error]}),r=Object(ae.a)(t,2),n=r[0],a=r[1],o=Oe();return l.a.useEffect((function(){if(n){var e=n.pending,t=n.value,r=n.error;e&&o({type:"GET_ALBUMS_BY_QUERY_SERVICE__PENDING"}),t&&o({type:"GET_ALBUMS_BY_QUERY_SERVICE__RESOLVED",payload:t}),r&&o({type:"GET_ALBUMS_BY_QUERY_SERVICE__REJECTED",payload:r})}}),[o,n]),l.a.useCallback((function(t){return a(e(t))}),[a,e])}(),_=qt(rl),m=_.failed,f=_.albums,d=_.newAlbums;l.a.useEffect((function(){i({type:"SEARCH_ALBUMS_PAGE__NEW_QUERY",payload:u})}),[i,u]),l.a.useEffect((function(){if(!m)return s(u),function(e,t){var r=window.setInterval(e,t);return function(){window.clearInterval(r)}}((function(){return s(u)}),t)}),[m,s,t,u]);var p=l.a.useCallback((function(){i({type:"SEARCH_ALBUMS_PAGE__SHOW_NEW_RESULTS"})}),[i]),E=l.a.useCallback((function(){i({type:"SEARCH_ALBUMS_PAGE__RETRY"})}),[i]),b=u,v=f,A={screen:l.a.useMemo((function(){if(!m&&f.length>0)return d.length>0?"HAS_NEW_RESULTS":"HAS_RESULTS";if(!m&&0===f.length)return"LOADING";if(m&&0===f.length)return"FALLBACK";throw new TypeError}),[f.length,m,d.length]),titleText:b,subTitleText:n,fallbackSubTitleText:a,newResultsButtonText:o,fallbackButtonText:c,feedItems:v,onNewResultsButtonClick:p,onFallbackButtonClick:E};return l.a.createElement(Pl,A)},Sl=function(e){var t=e.searchInterval,r=void 0===t?5e3:t;return l.a.createElement(cl,null,l.a.createElement(Tl,{searchInterval:r}))},Cl=function(){return a.createElement(vt.d,null,a.createElement(vt.b,{exact:!0,path:At},a.createElement(fn,null)),a.createElement(vt.b,{exact:!0,path:Ot},a.createElement(Sl,null)),a.createElement(vt.b,{exact:!0,path:ht},a.createElement(tl,null)),a.createElement(vt.b,{path:"/"},a.createElement(vt.a,{to:At}),"}"))};function Il(){return(Il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ll(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Rl=l.a.createElement("path",{d:"M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z"}),kl=function(e){var t=e.svgRef,r=e.title,n=Ll(e,["svgRef","title"]);return l.a.createElement("svg",Il({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Rl)},Nl=l.a.forwardRef((function(e,t){return l.a.createElement(kl,Il({svgRef:t},e))})),wl=(r.p,Nl);function jl(){return(jl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dl(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Bl=l.a.createElement("path",{d:"M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"}),xl=function(e){var t=e.svgRef,r=e.title,n=Dl(e,["svgRef","title"]);return l.a.createElement("svg",jl({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Bl)},Fl=l.a.forwardRef((function(e,t){return l.a.createElement(xl,jl({svgRef:t},e))})),Ml=(r.p,Fl),Ul=r(103),Wl=r.n(Ul),Vl=function(e){var t=e.testId,r=e.className,n=void 0===r?"":r,l=Object(dt.a)(e,["testId","className"]);return a.createElement("button",Object.assign({},l,{className:"".concat(Wl.a.RoundButton__Button," ").concat(n),"data-testid":t}))},Gl=r(26),Hl=r.n(Gl),Yl=function(e){var t=e.children,r=e.playing;return a.createElement("div",{className:"".concat(Hl.a.PlaylistTrack__Wrapper," ").concat(r?Hl.a.PlaylistTrack__Wrapper_playing:"")},t)},zl=function(e){var t=e.children,r=e.disabled,n=e.onClick;return a.createElement("button",{disabled:r,className:Hl.a.PlaylistTrack__Button,type:"button",onClick:n},t)},Kl=function(e){var t=e.artistName,r=e.title;return l.a.createElement("div",{className:Hl.a.PlaylistTrack__Info},l.a.createElement("div",{className:Hl.a.PlaylistTrack__Title},r),l.a.createElement("div",{className:Hl.a.PlaylistTrack__Artist},t))},Zl=function(e){var t=e.children;return a.createElement("div",{className:Hl.a.PlaylistTrack__SecondaryAction},t)},ql=function(e){var t=e.screen,r=e.artistName,n=e.title,a=e.onPlay,o=e.onRemove;return l.a.createElement(Yl,{playing:"PLAYING"===t},l.a.createElement(zl,{onClick:a},l.a.createElement(Kl,{title:n,artistName:r})),l.a.createElement(Zl,null,l.a.createElement(Vl,{onClick:o},l.a.createElement(fa,null))))},Ql=function(e){var t=e.track,r=t.id,n=t.artistName,l=t.title,o=Lr().playingTrackId===r,c=Oe(),u=a.useCallback((function(){c({type:"PLAYLIST_TRACK__REMOVE",payload:r})}),[c,r]),i=a.useCallback((function(){c({type:"PLAYLIST_TRACK__PLAY",payload:r})}),[c,r]),s=o?"PLAYING":"DEFAULT";return a.useMemo((function(){return a.createElement(ql,{screen:s,artistName:n,title:l,onRemove:u,onPlay:i})}),[s,n,l,u,i])},Jl=r(33),Xl=r.n(Jl),$l=function(e){return a.createElement("div",Object.assign({className:Xl.a.PlaylistPopup__Wrapper},e))};function eo(){return(eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function to(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ro=l.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),no=l.a.createElement("path",{d:"M6 13h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1zm-2 4h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm3-9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1z"}),ao=function(e){var t=e.svgRef,r=e.title,n=to(e,["svgRef","title"]);return l.a.createElement("svg",eo({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,ro,no)},lo=l.a.forwardRef((function(e,t){return l.a.createElement(ao,eo({svgRef:t},e))})),oo=(r.p,lo),co=function(e){var t=e.tracksCount,r=e.onClearPlaylist;return a.createElement("div",{className:Xl.a.PlaylistPopup__Header},a.createElement("div",{className:Xl.a.PlaylistPopup__Count},t," tracks"),a.createElement("div",{className:Xl.a.PlaylistPopup__Button},a.createElement(bt,{onClick:r},a.createElement(oo,null))))},uo=function(e){return a.createElement("div",{className:Xl.a.PlaylistPopup__Body},a.createElement("div",Object.assign({className:Xl.a.PlaylistPopup__Content},e)))},io=function(e){var t=Lr().playlist,r=Oe(),n=a.useCallback((function(){r({type:"PLAYLIST_POPUP__CLEAR"})}),[r]),l=a.useMemo((function(){return t.map((function(e){return a.createElement(Ql,{track:e,key:e.id})}))}),[t]);return a.createElement($l,null,a.createElement(co,{tracksCount:t.length,onClearPlaylist:n}),a.createElement(uo,null,l))},so=r(51),_o=r.n(so),mo=function(e){var t=e.children;return a.createElement(It,{position:"bottom"},a.createElement("div",{className:_o.a.PlaylistControls__Wrapper},t),";")},fo=function(e){var t=e.mod,r=e.children,n=function(){var e="".concat(_o.a.PlaylistControls__Group);return"skip"===t?"".concat(e," ").concat(_o.a.PlaylistControls__Group_skip):"close"===t?"".concat(e," ").concat(_o.a.PlaylistControls__Group_player):void 0}();return a.createElement("div",{className:n},r)},po=function(e){var t=Oe(),r=a.useCallback((function(){t({type:"PLAYLIST_CONTROLS__PLAY_NEXT"})}),[t]),n=a.useCallback((function(){t({type:"PLAYLIST_CONTROLS__PLAY_PREVIOUS"})}),[t]),l=a.useCallback((function(){t({type:"PLAYLIST_CONTROLS__CLOSE"})}),[t]);return a.createElement(mo,null,a.createElement(fo,{mod:"skip"},a.createElement(bt,{onClick:n},a.createElement(wl,null)),a.createElement(bt,{onClick:r},a.createElement(Ml,null))),a.createElement(fo,{mod:"close"},a.createElement(bt,{onClick:l},a.createElement(oa,null))),a.createElement(io,null))};function Eo(){return(Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bo(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var vo=l.a.createElement("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}),Ao=function(e){var t=e.svgRef,r=e.title,n=bo(e,["svgRef","title"]);return l.a.createElement("svg",Eo({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,vo)},yo=l.a.forwardRef((function(e,t){return l.a.createElement(Ao,Eo({svgRef:t},e))})),Oo=(r.p,yo);function go(){return(go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ho(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Po=l.a.createElement("path",{d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"}),To=function(e){var t=e.svgRef,r=e.title,n=ho(e,["svgRef","title"]);return l.a.createElement("svg",go({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Po)},So=l.a.forwardRef((function(e,t){return l.a.createElement(To,go({svgRef:t},e))})),Co=(r.p,So);function Io(){return(Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Lo(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ro=l.a.createElement("path",{d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1zm0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1zM4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18-1.84 0-3.28 1.64-2.95 3.54.21 1.21 1.2 2.2 2.41 2.41 1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1h-2z"}),ko=function(e){var t=e.svgRef,r=e.title,n=Lo(e,["svgRef","title"]);return l.a.createElement("svg",Io({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),r?l.a.createElement("title",null,r):null,Ro)},No=l.a.forwardRef((function(e,t){return l.a.createElement(ko,Io({svgRef:t},e))})),wo=(r.p,No),jo=r(29),Do=r.n(jo),Bo=function(e){var t=e.title,r=e.artistName;return a.createElement("div",{className:Do.a.PlaybackControls__Info},a.createElement("span",{className:Do.a.PlaybackControls__Title},t),a.createElement("span",{className:Do.a.PlaybackControls__Artist},r))},xo=function(e){var t=e.children,r=e.mod,n=function(){var e="".concat(Do.a.PlaybackControls__Group);return"player"===r?"".concat(e," ").concat(Do.a.PlaybackControls__Group_player):"playlist"===r?"".concat(e," ").concat(Do.a.PlaybackControls__Group_playlist):void 0}();return a.createElement("div",{className:n},t)},Fo=function(e){var t=e.children;e.toRight;return a.createElement(It,{position:"bottom"},a.createElement("div",{className:Do.a.PlaybackControls__Wrapper},t))},Mo=function(e){var t=e.screen,r=e.title,n=e.artistName,l=e.onPlaybackButtonClick,o=e.onPlaylistButtonClick;return a.createElement(Fo,null,a.createElement(xo,{mod:"player"},a.createElement(bt,{disabled:"PENDING"===t||"FAILED"===t,onClick:l},"PLAYING"===t&&a.createElement(Co,null),"PAUSED"===t&&a.createElement(Mr,null),"FAILED"===t&&a.createElement(Oo,null),"PENDING"===t&&a.createElement(Cr,null))),a.createElement(Bo,{title:r,artistName:n}),a.createElement(xo,{mod:"playlist"},a.createElement(bt,{onClick:o},a.createElement(wo,null))))},Uo=function(){var e=Oe(),t=function(){var e=Lr(),t=e.playlist,r=e.playingTrackId,n=t.find((function(e){return e.id===r}));if(!n)throw new TypeError;return n}(),r=t.title,n=t.artistName,l=Lr().audioStatus,o=a.useCallback((function(){"PLAYING"===l&&e({type:"PLAYBACK_CONTROLS__PAUSE"}),"PAUSED"===l&&e({type:"PLAYBACK_CONTROLS__PLAY"})}),[l,e]),c=a.useCallback((function(){e({type:"PLAYBACK_CONTROLS__OPEN_PLAYLIST"})}),[e]),u={screen:function(){switch(l){case"PLAYING":return"PLAYING";case"PAUSED":return"PAUSED";case"PENDING":return"PENDING";case"FAILED":return"FAILED";default:throw new x(l)}}(),title:r,artistName:n,onPlaybackButtonClick:o,onPlaylistButtonClick:c};return a.createElement(Mo,u)},Wo=function(){var e=Oe(),t="PAUSED"===Lr().audioStatus,r=a.useRef(new Audio),n=a.useCallback((function(){var e=r.current;e.src&&(e.removeAttribute("src"),e.load())}),[]),l=a.useCallback((function(e){var n=r.current;n.src!==e&&(n.src=e,t||n.play())}),[t]);return a.useEffect((function(){var e=r.current;t&&!e.paused&&e.pause(),!t&&e.paused&&e.play()}),[t]),a.useEffect((function(){var t=r.current,n=function(){e({type:"AUDIO__WAITING"})},a=function(){e({type:"AUDIO__PAUSED"})},l=function(){e({type:"AUDIO__PLAYING"})},o=function(){e({type:"AUDIO__ENDED"})},c=function(r){e({type:"AUDIO__FAILED",payload:t.error||null})};return t.addEventListener("pause",a),t.addEventListener("waiting",n),t.addEventListener("playing",l),t.addEventListener("ended",o),t.addEventListener("error",c),function(){t.removeEventListener("pause",a),t.removeEventListener("waiting",n),t.removeEventListener("playing",l),t.removeEventListener("ended",o),t.removeEventListener("error",c)}}),[e]),{play:l,stop:n}},Vo=function(){var e=Wo(),t=e.play,r=e.stop,n=function(){var e=Lr(),t=e.playlist,r=e.playingTrackId,n=t.find((function(e){return e.id===r}));return n?n.audioSrc:null}();a.useEffect((function(){n?t(n):r()}),[t,r,n]),a.useEffect((function(){return r}),[r]);var l=Lr(),o=l.primaryControls,c=l.secondaryControls,u=Lr().playingTrackId,i=null!==u&&"PLAYBACK"===c,s=null!==u&&"PLAYLIST"===c,_="SEARCH"===o,m="OVERVIEW"===o;return a.createElement(a.Fragment,null,a.createElement(Cl,null),_&&a.createElement(jt,null),m&&a.createElement(ur,null),s&&a.createElement(po,null),i&&a.createElement(Uo,null))},Go=r(67),Ho=r.n(Go),Yo=function(e){var t=e.children;return a.createElement("div",{className:Ho.a.App__Wrapper,"data-testid":Le},t)},zo=function(){return a.createElement("div",{"data-testid":Re,className:Ho.a.App__Loader},a.createElement(Cr,null))},Ko=function(e){!function(){var e=Ae().getIntl,t=ye(),r=Object(ae.a)(t,2),n=r[0],l=r[1],o=Oe();a.useEffect((function(){l(e())}),[e,l]),a.useEffect((function(){if(n){var e=n.pending,t=n.value;e&&o({type:"GET_INTL_SERVICE__PENDING"}),t&&o({type:"GET_INTL_SERVICE__RESOLVED",payload:t})}}),[o,l,n])}();var t=Qt().activeScreen;return a.createElement(Yo,null,"LOADING"===t&&a.createElement(zo,null),"PLAYER"===t&&a.createElement(ve,null,a.createElement(Vo,null)))},Zo=r(104),qo=r.n(Zo),Qo=function(e){var t=e.children;return a.createElement("div",{className:qo.a.ThemeProvider__Wrapper},t)},Jo=function(e){var t=e.children;return a.createElement(Qo,null,t)},Xo=r(105),$o=function(e){function t(){var e,r;Object(k.a)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(r=Object(N.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).state={error:null},r}return Object(j.a)(t,e),Object(Xo.a)(t,[{key:"componentDidCatch",value:function(e){0}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.fallbackView,n=e.constructors,a=this.state.error;if(null!==a){if(n.some((function(e){return a instanceof e})))return r(a);throw a}return t}}],[{key:"getDerivedStateFromError",value:function(e){if(e instanceof Error)return{error:e};throw new TypeError("ErrorBoundary accepts only instances of Error.")}}]),t}(a.Component),ec=r(82),tc=r.n(ec),rc=function(e){var t=e.message;return a.createElement("div",{className:tc.a.RootFallback__Wrapper},a.createElement("p",{className:tc.a.RootFallback__Text},t))},nc=function(e){var t=e.children;return a.createElement($o,{constructors:[TypeError],fallbackView:rc},t)},ac=document.getElementById("root");ac&&c.a.render(l.a.createElement((function(e){var t=e.services;return a.createElement(u.a,null,a.createElement(ne.Provider,{value:t},a.createElement(Jo,null,a.createElement(nc,null,a.createElement(_e,null,a.createElement(Ko,null))))))}),{services:n}),ac)},22:function(e,t,r){e.exports={AlbumTrackEditor__Wrapper:"AlbumTrackEditor_AlbumTrackEditor__Wrapper__AqPrR",AlbumTrackEditor__Common:"AlbumTrackEditor_AlbumTrackEditor__Common__3G4iR",AlbumTrackEditor__Button:"AlbumTrackEditor_AlbumTrackEditor__Button__3bfiD",AlbumTrackEditor__FileInfo:"AlbumTrackEditor_AlbumTrackEditor__FileInfo__QNcRj",AlbumTrackEditor__FileIcon:"AlbumTrackEditor_AlbumTrackEditor__FileIcon__m6Q-l",AlbumTrackEditor__FileName:"AlbumTrackEditor_AlbumTrackEditor__FileName__RuKmG"}},25:function(e,t,r){e.exports={DropZone__Wrapper:"DropZone_DropZone__Wrapper__1pqI8",DropZone__Label:"DropZone_DropZone__Label__156RJ",DropZone__Input:"DropZone_DropZone__Input__215m4",DropZone__Text:"DropZone_DropZone__Text__3m5qb",DropZone__MainText:"DropZone_DropZone__MainText__hhaAS",DropZone__ErrorText:"DropZone_DropZone__ErrorText__1sa0i",DropZone__SuccessText:"DropZone_DropZone__SuccessText__WlB2W"}},26:function(e,t,r){e.exports={PlaylistTrack__Wrapper:"Playlist_PlaylistTrack__Wrapper__3ujOz",PlaylistTrack__Wrapper_playing:"Playlist_PlaylistTrack__Wrapper_playing__3qup0",PlaylistTrack__Button:"Playlist_PlaylistTrack__Button__8Cy7D",PlaylistTrack__Info:"Playlist_PlaylistTrack__Info__192Bd",PlaylistTrack__Title:"Playlist_PlaylistTrack__Title__2ynps",PlaylistTrack__Artist:"Playlist_PlaylistTrack__Artist__wl8FQ",PlaylistTrack__SecondaryAction:"Playlist_PlaylistTrack__SecondaryAction__6_OqH"}},27:function(e,t,r){e.exports={AlbumCoverEditor__Wrapper:"AlbumCoverEditor_AlbumCoverEditor__Wrapper__1kjwi",AlbumCoverEditor__Input:"AlbumCoverEditor_AlbumCoverEditor__Input__14bSW",AlbumCoverEditor__Image:"AlbumCoverEditor_AlbumCoverEditor__Image__9mH4k",AlbumCoverEditor__Error:"AlbumCoverEditor_AlbumCoverEditor__Error__kCRMp",AlbumCoverEditor__Preview:"AlbumCoverEditor_AlbumCoverEditor__Preview__-u3ie"}},29:function(e,t,r){e.exports={PlaybackControls__Wrapper:"PlaybackControls_PlaybackControls__Wrapper__1FXHs",PlaybackControls__Group:"PlaybackControls_PlaybackControls__Group__1BefT",PlaybackControls__Group_player:"PlaybackControls_PlaybackControls__Group_player__3H7aN",PlaybackControls__Group_playlist:"PlaybackControls_PlaybackControls__Group_playlist__3cfcD",PlaybackControls__Info:"PlaybackControls_PlaybackControls__Info__2crwY",PlaybackControls__Title:"PlaybackControls_PlaybackControls__Title__2VEX9",PlaybackControls__Artist:"PlaybackControls_PlaybackControls__Artist__1AwdQ"}},33:function(e,t,r){e.exports={PlaylistPopup__Wrapper:"Playlist_PlaylistPopup__Wrapper__gSS19",PlaylistPopup__Header:"Playlist_PlaylistPopup__Header__1T3mG",PlaylistPopup__Count:"Playlist_PlaylistPopup__Count__16tTF",PlaylistPopup__Button:"Playlist_PlaylistPopup__Button__2XWUd",PlaylistPopup__Body:"Playlist_PlaylistPopup__Body__34T9-",PlaylistPopup__Content:"Playlist_PlaylistPopup__Content__1mpS-"}},37:function(e,t,r){e.exports={AlbumCover__Wrapper:"AlbumCover_AlbumCover__Wrapper__3vfax",AlbumCover__Image:"AlbumCover_AlbumCover__Image__yMhaP",AlbumCover__Actions:"AlbumCover_AlbumCover__Actions__2RlPN",AlbumCover__Button:"AlbumCover_AlbumCover__Button__3T4Av"}},38:function(e,t,r){e.exports={FeedAlbum__Wrapper:"FeedAlbum_FeedAlbum__Wrapper__l-o-U",FeedAlbum__Info:"FeedAlbum_FeedAlbum__Info__1B89V",FeedAlbum__Title:"FeedAlbum_FeedAlbum__Title__1Bqqf",FeedAlbum__Artist:"FeedAlbum_FeedAlbum__Artist__224zw"}},39:function(e,t,r){e.exports={AlbumAudioEditor__Wrapper:"AlbumAudioEditor_AlbumAudioEditor__Wrapper__r5bbO",AlbumAudioEditor__Input:"AlbumAudioEditor_AlbumAudioEditor__Input__15uyM",AlbumAudioEditor__Label:"AlbumAudioEditor_AlbumAudioEditor__Label__1soUd",AlbumAudioEditor__Text:"AlbumAudioEditor_AlbumAudioEditor__Text__22Jkp",AlbumAudioEditor__Error:"AlbumAudioEditor_AlbumAudioEditor__Error__1jvVu"}},47:function(e,t,r){e.exports={SearchControls__Wrapper:"SearchControls_SearchControls__Wrapper__2F4dR",SearchControls__Form:"SearchControls_SearchControls__Form__1d3Ne",SearchControls__Input:"SearchControls_SearchControls__Input__7iFL-",SearchControls__Button:"SearchControls_SearchControls__Button__2G9H6"}},48:function(e,t,r){e.exports={AlbumsFeed__Wrapper:"AlbumsFeed_AlbumsFeed__Wrapper__3_OLy",AlbumsFeed__Content:"AlbumsFeed_AlbumsFeed__Content__3AUS-",AlbumsFeed__Button:"AlbumsFeed_AlbumsFeed__Button__1srD4"}},49:function(e,t,r){e.exports={Page__Wrapper:"Page_Page__Wrapper__UyWg9",Page__Wrapper_centered:"Page_Page__Wrapper_centered__11xTF",Page__Wrapper_compact:"Page_Page__Wrapper_compact__3Sczl",Page__Loader:"Page_Page__Loader__23DRs"}},50:function(e,t,r){e.exports={LatestAlbumsPage__Wrapper_feed:"LatestAlbumsPage_LatestAlbumsPage__Wrapper_feed__3QnLr",LatestAlbumsPage__Text_fallback:"LatestAlbumsPage_LatestAlbumsPage__Text_fallback__3scz-"}},51:function(e,t,r){e.exports={PlaylistControls__Wrapper:"PlaylistControls_PlaylistControls__Wrapper__1e_Df",PlaylistControls__Group:"PlaylistControls_PlaylistControls__Group__1Nm5R",PlaylistControls__Group_skip:"PlaylistControls_PlaylistControls__Group_skip__2Jizf",PlaylistControls__Group_close:"PlaylistControls_PlaylistControls__Group_close__29sFR"}},59:function(e,t,r){e.exports={PlayerNavigation__Popup:"PlayerNavigation_PlayerNavigation__Popup__zMj3L",PlayerNavigation__Link:"PlayerNavigation_PlayerNavigation__Link__2xJNX",PlayerNavigation__Link_current:"PlayerNavigation_PlayerNavigation__Link_current__2RhCJ",PlayerNavigation__CloseButton:"PlayerNavigation_PlayerNavigation__CloseButton__3dlLU"}},60:function(e,t,r){e.exports={OverviewControls__Wrapper:"OverviewControls_OverviewControls__Wrapper__2i7JL",OverviewControls__Group_nav:"OverviewControls_OverviewControls__Group_nav__3Lx1y",OverviewControls__Group_search:"OverviewControls_OverviewControls__Group_search__3JsoJ"}},61:function(e,t,r){e.exports={FloatingLabelInput__Wrapper:"FloatingLabelInput_FloatingLabelInput__Wrapper__Dzxo5",FloatingLabelInput__Input:"FloatingLabelInput_FloatingLabelInput__Input__vSYyS",FloatingLabelInput__Placeholder:"FloatingLabelInput_FloatingLabelInput__Placeholder__DdDAO",FloatingLabelInput__ValidationMessage:"FloatingLabelInput_FloatingLabelInput__ValidationMessage__1spcs"}},67:function(e,t,r){e.exports={App__Wrapper:"App_App__Wrapper__ASYXS",App__Loader:"App_App__Loader__1IMm1"}},68:function(e,t,r){e.exports={FixedPanel__Wrapper:"FixedPanel_FixedPanel__Wrapper__3plmL",FixedPanel__Wrapper_top:"FixedPanel_FixedPanel__Wrapper_top__3XQan",FixedPanel__Wrapper_bottom:"FixedPanel_FixedPanel__Wrapper_bottom__6x-OT"}},78:function(e,t,r){e.exports={SquareButton__Button:"SquareButton_SquareButton__Button__3HxaT",SquareButton__Button_toggledOn:"SquareButton_SquareButton__Button_toggledOn__3Q3xt"}},81:function(e,t,r){e.exports={ShareAlbumPage__Loader:"ShareAlbumPage_ShareAlbumPage__Loader__kpuK-",ShareAlbumPage__Spinner:"ShareAlbumPage_ShareAlbumPage__Spinner__1xDtI",rotate:"ShareAlbumPage_rotate__cz8GV"}},82:function(e,t,r){e.exports={RootFallback__Wrapper:"App_RootFallback__Wrapper__1Qq9-",RootFallback__Text:"App_RootFallback__Text__1LOAG"}}},[[106,1,2]]]);
//# sourceMappingURL=main.acbcedaa.chunk.js.map